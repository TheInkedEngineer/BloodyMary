<!DOCTYPE html>
<html lang="en">
  <head>
    <title>BloodyMary  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="BloodyMary  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">BloodyMary 1.3.1 Docs</a> (93% documented)</p>
        <p class="header-right"><a href="https://github.com/TheInkedEngineer/"><img src="img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">BloodyMary Reference</a>
        <img id="carat" src="img/carat.png" />
        BloodyMary  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/BMContainerView.html">BMContainerView</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/BMViewController.html">BMViewController</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/PDFViewController.html">PDFViewController</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/NavigationStyle.html">NavigationStyle</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/Thread.html">Thread</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/UINavigationController.html">UINavigationController</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/UITabBarController.html">UITabBarController</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/UIView.html">UIView</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/UIViewController.html">UIViewController</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/AnyRoutableObject.html">AnyRoutableObject</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/BMView.html">BMView</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols.html#/s:10BloodyMary11BMViewModelP">BMViewModel</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/BMViewWithViewControllerAndViewModel.html">BMViewWithViewControllerAndViewModel</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/BMViewWithViewModel.html">BMViewWithViewModel</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/InspectableHierarchy.html">InspectableHierarchy</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/InspectablePresentedViewController.html">InspectablePresentedViewController</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Routable.html">Routable</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/RoutingConfigurationProvider.html">RoutingConfigurationProvider</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/RoutableObject.html">RoutableObject</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Router.html">Router</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Router/RoutingError.html">– RoutingError</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Typealiases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:10BloodyMary22RoutableViewControllera">RoutableViewController</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:10BloodyMary5Routea">Route</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:10BloodyMary17RoutingCompletiona">RoutingCompletion</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:10BloodyMary16ScreenIdentifiera">ScreenIdentifier</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <p align="center">
<img src="logo.png" alt="BloodyMary logo" width="400">
</p>

<p><a href="https://twitter.com/theinkedgineer"><img src="https://img.shields.io/twitter/url/https/theinkedgineer.svg?label=TheInkedgineer&style=social" alt="Twitter"></a></p>
<h1 id='bloodymary' class='heading'>BloodyMary</h1>

<p><code>BloodyMary</code> is a stripped down version of <a href="https://github.com/BendingSpoons/tempura-swift">Tempura</a>. It is a one-directional <a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93viewmodel">MVVM</a> inspired framework that helps you write clean code and seperate the responsabilities properly.</p>

<p><code>BloodyMary</code> has its own custom navigation system layer that works on top on Apple&rsquo;s native navigation system so none of the Apple magic is lost. <code>BloodyMary</code>&lsquo;s navigation system can work next to Apple&rsquo;s way with no problem what so ever.</p>

<p><code>BloodyMary</code>&rsquo;s  navigation system aims to help you write the least code needed to get the most out of your app. You provide the SDK with the routes identifiers and their respective view controllers, and BloodyMary does the rest. From instantiating the correct VC to properly pushing it or presenting it etc..
The <code>show</code> and <code>hide</code> functions are done on a single queue in a synchronous way.</p>

<p>The <code>1.3.x</code> is the version containing the navigation system, currently being used on different <code>WiseEmotions</code> libraries and <code>Telepass</code> iOS app.</p>
<h3 id='roadmap' class='heading'>RoadMap</h3>

<ul>
<li>[x] Custom Navigation System</li>
<li>[ ] Integrate Combine</li>
</ul>
<h1 id='1-requirements-and-compatibility' class='heading'>1. Requirements and Compatibility</h1>

<table><thead>
<tr>
<th>Swift</th>
<th>BloodyMary</th>
<th>iOS</th>
</tr>
</thead><tbody>
<tr>
<td>5.1+</td>
<td>1.0.x</td>
<td>10+</td>
</tr>
<tr>
<td>5.1+</td>
<td>1.1.x</td>
<td>10+</td>
</tr>
<tr>
<td>5.1+</td>
<td>1.2.x</td>
<td>10+</td>
</tr>
<tr>
<td>5.1+</td>
<td>1.3.x</td>
<td>10+</td>
</tr>
</tbody></table>
<h1 id='2-installation' class='heading'>2. Installation</h1>
<h2 id='cocoapods' class='heading'>Cocoapods</h2>

<p>Add the following line to your Podfile
<code>pod &#39;BloodyMary&#39; ~&gt; &#39;1.3.1&#39;</code></p>
<h1 id='3-documentation' class='heading'>3. Documentation</h1>

<p><code>BloodyMary</code> is fully documented. Checkout the documentation <a href="https://theinkedengineer.github.io/BloodyMary/docs/1.1.x/index.html"><strong>here</strong></a>.</p>
<h1 id='4-code-example' class='heading'>4. Code Example</h1>
<h2 id='the-one-directional-mvvm' class='heading'>The one directional MVVM</h2>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">RemindersListViewModel</span><span class="p">:</span> <span class="kt">BMViewModel</span> <span class="p">{</span>
  <span class="k">var</span> <span class="nv">reminders</span><span class="p">:</span> <span class="p">[</span><span class="kt">Models</span><span class="o">.</span><span class="kt">Reminders</span><span class="p">]</span>

  <span class="kd">func</span> <span class="nf">shouReloadData</span><span class="p">(</span><span class="n">oldModel</span> <span class="nv">model</span><span class="p">:</span> <span class="kt">RemindersListViewModel</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
    <span class="n">model</span><span class="o">.</span><span class="n">reminders</span><span class="o">.</span><span class="n">count</span> <span class="o">!=</span> <span class="k">self</span><span class="o">.</span><span class="n">reminders</span><span class="o">.</span><span class="n">count</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="kt">RemindersListView</span><span class="p">:</span> <span class="kt">BMViewWithViewControllerAndViewModel</span> <span class="p">{</span>
  <span class="p">[</span><span class="o">...</span><span class="p">]</span>

  <span class="kd">func</span> <span class="nf">update</span><span class="p">(</span><span class="nv">oldModel</span><span class="p">:</span> <span class="kt">RemindersListViewModel</span><span class="p">?)</span> <span class="p">{</span>
    <span class="k">guard</span> <span class="k">let</span> <span class="nv">model</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">viewModel</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
    <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="nf">shouReloadData</span><span class="p">(</span><span class="nv">oldModel</span><span class="p">:</span> <span class="n">oldModel</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">self</span><span class="o">.</span><span class="n">tableView</span><span class="o">.</span><span class="nf">reloadData</span><span class="p">()</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="p">[</span><span class="o">...</span><span class="p">]</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="kt">RemindersListViewController</span><span class="p">:</span> <span class="kt">BMViewController</span> <span class="p">{</span>
  <span class="kd">func</span> <span class="nf">setupInteractions</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">self</span><span class="o">.</span><span class="n">rootView</span><span class="o">.</span><span class="n">didTapDeleteButton</span> <span class="o">=</span> <span class="p">{</span> <span class="p">[</span><span class="k">weak</span> <span class="k">self</span><span class="p">]</span> <span class="n">index</span> <span class="k">in</span>
      <span class="k">guard</span> <span class="k">let</span> <span class="nv">self</span> <span class="o">=</span> <span class="k">self</span><span class="p">,</span> <span class="k">let</span> <span class="nv">model</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">viewModel</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
      <span class="k">let</span> <span class="nv">newReminders</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">reminders</span><span class="o">.</span><span class="nf">remove</span><span class="p">(</span><span class="nv">at</span><span class="p">:</span> <span class="n">index</span><span class="p">)</span>
      <span class="k">let</span> <span class="nv">newViewModel</span> <span class="o">=</span> <span class="kt">RemindersListViewModel</span><span class="p">(</span><span class="nv">reminders</span><span class="p">:</span> <span class="n">newReminders</span><span class="p">)</span>
      <span class="k">self</span><span class="o">.</span><span class="nf">update</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="n">newViewModel</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h2 id='the-navigation-system' class='heading'>The Navigation System</h2>
<h3 id='providing-the-configuration-for-the-router' class='heading'>Providing the configuration for the router</h3>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">BloodyMary</span>

<span class="kd">struct</span> <span class="kt">DependenciesContainer</span><span class="p">:</span> <span class="kt">RoutingConfigurationProvider</span> <span class="p">{</span>
  <span class="c1">// prevent it from being instantiated.</span>
  <span class="kd">private</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{}</span>

  <span class="kd">static</span> <span class="k">var</span> <span class="nv">shared</span> <span class="o">=</span> <span class="kt">DependenciesContainer</span><span class="p">()</span>

  <span class="k">var</span> <span class="nv">screensAndDestinations</span><span class="p">:</span> <span class="p">[</span><span class="kt">ScreenIdentifier</span> <span class="p">:</span> <span class="kt">RoutableViewController</span><span class="o">.</span><span class="k">Type</span><span class="p">]</span> <span class="p">{</span>
    <span class="p">[</span>
      <span class="s">"green"</span><span class="p">:</span> <span class="kt">GreenViewController</span><span class="o">.</span><span class="k">self</span><span class="p">,</span>
      <span class="s">"red"</span><span class="p">:</span> <span class="kt">RedViewController</span><span class="o">.</span><span class="k">self</span>
    <span class="p">]</span>
  <span class="p">}</span>

  <span class="kd">lazy</span> <span class="k">var</span> <span class="nv">router</span><span class="p">:</span> <span class="kt">Router</span> <span class="o">=</span> <span class="kt">Router</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="k">self</span><span class="p">)</span>
<span class="p">}</span>

</code></pre>
<h3 id='installing-the-root' class='heading'>Installing the root</h3>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">UIKit</span>
<span class="kd">import</span> <span class="kt">BloodyMary</span>

<span class="kd">@UIApplicationMain</span>
<span class="kd">class</span> <span class="kt">AppDelegate</span><span class="p">:</span> <span class="kt">UIResponder</span><span class="p">,</span> <span class="kt">UIApplicationDelegate</span> <span class="p">{</span>

  <span class="k">var</span> <span class="nv">window</span><span class="p">:</span> <span class="kt">UIWindow</span><span class="p">?</span>

  <span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="n">_</span> <span class="nv">application</span><span class="p">:</span> <span class="kt">UIApplication</span><span class="p">,</span> <span class="n">didFinishLaunchingWithOptions</span> <span class="nv">launchOptions</span><span class="p">:</span> <span class="p">[</span><span class="kt">UIApplication</span><span class="o">.</span><span class="kt">LaunchOptionsKey</span><span class="p">:</span> <span class="kt">Any</span><span class="p">]?)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>

    <span class="k">self</span><span class="o">.</span><span class="n">window</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">window</span> <span class="p">??</span> <span class="kt">UIWindow</span><span class="p">(</span><span class="nv">frame</span><span class="p">:</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="p">)</span>

    <span class="k">guard</span> <span class="k">let</span> <span class="nv">window</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">window</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">false</span>
    <span class="p">}</span>

    <span class="k">let</span> <span class="nv">redVC</span> <span class="o">=</span> <span class="kt">RedViewController</span><span class="p">()</span>
    <span class="k">let</span> <span class="nv">redVM</span> <span class="o">=</span> <span class="kt">RedViewModel</span><span class="p">()</span>
    <span class="n">redVC</span><span class="o">.</span><span class="n">viewModel</span> <span class="o">=</span> <span class="n">whiteVM</span>

    <span class="kt">DependenciesContainer</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="nf">installRoot</span><span class="p">(</span><span class="nv">using</span><span class="p">:</span> <span class="n">greenViewController</span><span class="p">,</span> <span class="nv">in</span><span class="p">:</span> <span class="n">window</span><span class="p">)</span>

    <span class="k">return</span> <span class="kc">true</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h3 id='navigating-from-a-view-to-another' class='heading'>Navigating from a view to another</h3>
<pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">RedViewController</span><span class="p">:</span> <span class="kt">BMViewController</span><span class="o">&lt;</span><span class="kt">RedView</span><span class="o">&gt;</span><span class="p">,</span> <span class="kt">Routable</span> <span class="p">{</span>

  <span class="kd">func</span> <span class="nf">assign</span><span class="p">(</span><span class="nv">model</span><span class="p">:</span> <span class="kt">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
    <span class="k">guard</span> <span class="k">let</span> <span class="nv">model</span> <span class="o">=</span> <span class="n">model</span> <span class="k">as?</span> <span class="kt">RedViewModel</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">false</span>
    <span class="p">}</span>
    <span class="k">self</span><span class="o">.</span><span class="n">viewModel</span> <span class="o">=</span> <span class="n">model</span>
    <span class="k">return</span> <span class="kc">true</span>
  <span class="p">}</span>

  <span class="kd">static</span> <span class="k">var</span> <span class="nv">screenIdentifier</span><span class="p">:</span> <span class="kt">ScreenIdentifier</span> <span class="p">{</span>
    <span class="s">"red"</span>
  <span class="p">}</span>

  <span class="k">override</span> <span class="kd">func</span> <span class="nf">setupInteractions</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">super</span><span class="o">.</span><span class="nf">setupInteractions</span><span class="p">()</span>

    <span class="k">self</span><span class="o">.</span><span class="n">rootView</span><span class="o">.</span><span class="n">didTapButton</span> <span class="o">=</span> <span class="p">{</span> <span class="n">_</span> <span class="k">in</span>
      <span class="k">let</span> <span class="nv">greenRoutableObject</span> <span class="o">=</span> <span class="kt">RoutableObject</span><span class="p">(</span>
        <span class="nv">screenIdentifier</span><span class="p">:</span> <span class="kt">GreenViewController</span><span class="o">.</span><span class="n">screenIdentifier</span><span class="p">,</span>
        <span class="nv">viewModel</span><span class="p">:</span> <span class="kt">GreenViewModel</span><span class="p">(),</span>
        <span class="nv">navigationStyle</span><span class="p">:</span> <span class="o">.</span><span class="nf">modal</span><span class="p">(),</span>
        <span class="nv">animated</span><span class="p">:</span> <span class="kc">false</span>
      <span class="p">)</span>

      <span class="kt">DependenciesContainer</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="nf">show</span><span class="p">(</span>
        <span class="nv">routableElements</span><span class="p">:</span> <span class="n">greenRoutableObject</span><span class="p">,</span> <span class="nv">completion</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h1 id='5-contribution' class='heading'>5. Contribution</h1>

<p><strong>Working on your first Pull Request?</strong> You can learn how from this <em>free</em> series <a href="https://egghead.io/series/how-to-contribute-to-an-open-source-project-on-github">How to Contribute to an Open Source Project on GitHub</a></p>
<h2 id='generate-the-project' class='heading'>Generate the project</h2>

<p>To generate this project locally, you need <a href="https://github.com/yonaskolb/XcodeGen">xcodegen</a>. It is a great tool to customize a project and generate it on the go.</p>

<p>You can either install it manually following their steps, or just run my <code>setup.sh</code> script. It automatically installs <a href="https://brew.sh">Homebrew</a> if it is missing, installs <code>xcodegen</code>, removes existing (if present) <code>.xcodeproj</code>, run <code>xcodegen</code> and moves configuratiom files to their appropriate place.</p>

          </section>
        </section>
        <section id="footer">
          <p>TheInkedEngineer</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.1</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
