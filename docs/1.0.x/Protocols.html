<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Protocols  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a name="//apple_ref/swift/Section/Protocols" class="dashAnchor"></a>
    <a title="Protocols  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">BloodyMary 1.0.0 Docs</a> (100% documented)</p>
        <p class="header-right"><a href="https://github.com/TheInkedEngineer/"><img src="img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">BloodyMary Reference</a>
        <img id="carat" src="img/carat.png" />
        Protocols  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/BMContainerView.html">BMContainerView</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/BMViewController.html">BMViewController</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/BMView.html">BMView</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols.html#/s:10BloodyMary11BMViewModelP">BMViewModel</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/BMViewWithViewControllerAndViewModel.html">BMViewWithViewControllerAndViewModel</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/BMViewWithViewModel.html">BMViewWithViewModel</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            <h1>Protocols</h1>
            <p>The following protocols are available globally.</p>

          </section>
          <section class="section task-group-section">
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:10BloodyMary6BMViewP"></a>
                    <a name="//apple_ref/swift/Protocol/BMView" class="dashAnchor"></a>
                    <a class="token" href="#/s:10BloodyMary6BMViewP">BMView</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>A protocol that views should conform to.</p>
<h2 id='its-main-goal-is-to-help-structure-the-code-in-a-more-clean-organized-way' class='heading'>Its main goal is to help structure the code in a more clean, organized way.</h2>
<h2 id='example' class='heading'>Example</h2>
<pre class="highlight swift"><code><span class="c1">/// An image based checkbox.</span>
<span class="kd">open</span> <span class="kd">class</span> <span class="kt">SKCheckbox</span><span class="p">:</span> <span class="kt">UIControl</span><span class="p">,</span> <span class="kt">BMView</span> <span class="p">{</span>

  <span class="c1">// MARK: - Properties</span>

  <span class="c1">/// The currently displayed checkbox Image.</span>
  <span class="kd">private</span> <span class="k">var</span> <span class="nv">checkboxImage</span> <span class="o">=</span> <span class="kt">UIImageView</span><span class="p">()</span>

  <span class="c1">/// Overriding the original method to update the icon based on state.</span>
  <span class="kd">open</span> <span class="k">override</span> <span class="k">var</span> <span class="nv">isEnabled</span><span class="p">:</span> <span class="kt">Bool</span> <span class="p">{</span>
    <span class="k">didSet</span> <span class="p">{</span> <span class="k">self</span><span class="o">.</span><span class="nf">update</span><span class="p">()</span> <span class="p">}</span>
  <span class="p">}</span>

  <span class="c1">// MARK: - Interactions</span>

  <span class="kd">public</span> <span class="k">var</span> <span class="nv">valueDidChange</span><span class="p">:</span> <span class="p">((</span><span class="n">_</span> <span class="nv">checkbox</span><span class="p">:</span> <span class="kt">SKCheckbox</span><span class="p">,</span> <span class="n">_</span> <span class="nv">oldValue</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)?</span>

  <span class="c1">// MARK: - init</span>

  <span class="c1">/// `init` via code.</span>
  <span class="kd">public</span> <span class="k">override</span> <span class="nf">init</span><span class="p">(</span><span class="nv">frame</span><span class="p">:</span> <span class="kt">CGRect</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="o">.</span><span class="nf">init</span><span class="p">(</span><span class="nv">frame</span><span class="p">:</span> <span class="n">frame</span><span class="p">)</span>
    <span class="k">self</span><span class="o">.</span><span class="nf">configure</span><span class="p">()</span>
    <span class="k">self</span><span class="o">.</span><span class="nf">update</span><span class="p">()</span>
    <span class="k">self</span><span class="o">.</span><span class="nf">layout</span><span class="p">()</span>
  <span class="p">}</span>

  <span class="c1">/// `init` via IB.</span>
  <span class="kd">public</span> <span class="kd">required</span> <span class="nf">init</span><span class="p">?(</span><span class="n">coder</span> <span class="nv">aDecoder</span><span class="p">:</span> <span class="kt">NSCoder</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="o">.</span><span class="nf">init</span><span class="p">(</span><span class="nv">coder</span><span class="p">:</span> <span class="n">aDecoder</span><span class="p">)</span>
    <span class="k">self</span><span class="o">.</span><span class="nf">configure</span><span class="p">()</span>
    <span class="k">self</span><span class="o">.</span><span class="nf">update</span><span class="p">()</span>
    <span class="k">self</span><span class="o">.</span><span class="nf">layout</span><span class="p">()</span>
  <span class="p">}</span>

  <span class="c1">// MARK: - CSUL</span>

  <span class="kd">public</span> <span class="kd">func</span> <span class="nf">configure</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">self</span><span class="o">.</span><span class="nf">addSubview</span><span class="p">(</span><span class="k">self</span><span class="o">.</span><span class="n">checkboxImage</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="kd">func</span> <span class="nf">style</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// style the default looks of the view and its subviews.</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="kd">func</span> <span class="nf">update</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// update UI when isEnabled changes status, among other things.</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="kd">func</span> <span class="nf">layout</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// layout the `checkboxImage` and other potential subviews.</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>The view exposes <strong>properties</strong> and <strong>interactions</strong> to the outside world.
The <strong>properties</strong> deal with the state of the element, whereas the <strong>interactions</strong> are callbacks to interact with changes inside the element.
The lifecycle of the view is composed of <code>configure</code>, <code>style</code>, <code>update and</code>layout`.</p>
<h2 id='configure' class='heading'>Configure</h2>

<p>Executed once when the view is instatiated. It deals with configuring the view.
For instance, a typical usecase would be to add subviews, or setup interactions.</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">configure</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">self</span><span class="o">.</span><span class="nf">addSubiew</span><span class="p">(</span><span class="n">sel</span><span class="o">.</span><span class="n">checkboxImage</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<h2 id='style' class='heading'>Style</h2>

<p>Executed once when the view is instatiated. It deals with applaying the basic static styling to the view.
In other words element properties that are independent of the state of the element are applied here.
If the background of the element always has the same color, the background color is set here.</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">style</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">self</span><span class="o">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="o">.</span><span class="n">white</span>
<span class="p">}</span>
</code></pre>
<h2 id='update' class='heading'>Update</h2>

<p>Update is not directly called when the object is instantiated but rather when a state related value changes its state.
Inside of the update, changes should be made to the UI to reflect the new state.</p>
<pre class="highlight swift"><code>  <span class="kd">open</span> <span class="k">override</span> <span class="k">var</span> <span class="nv">isEnabled</span><span class="p">:</span> <span class="kt">Bool</span> <span class="p">{</span>
    <span class="k">didSet</span> <span class="p">{</span> <span class="k">self</span><span class="o">.</span><span class="nf">update</span><span class="p">()</span> <span class="p">}</span>
  <span class="p">}</span>
</code></pre>
<h2 id='layout' class='heading'>Layout</h2>

<p>Excecuted once when the view is instatiated. It layouts the subviews as intended.</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">layout</span><span class="p">()</span> <span class="p">{</span>
 <span class="k">self</span><span class="o">.</span><span class="n">checkboxImage</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">bounds</span>
</code></pre>

                        <a href="Protocols/BMView.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">BMView</span> <span class="p">:</span> <span class="kt">AnyObject</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/TheInkedEngineer/blob/master/BloodyMary/Core/BMView.swift#L106-L122">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:10BloodyMary11BMViewModelP"></a>
                    <a name="//apple_ref/swift/Protocol/BMViewModel" class="dashAnchor"></a>
                    <a class="token" href="#/s:10BloodyMary11BMViewModelP">BMViewModel</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>An object, preferably a struct, containing a set of properties to be passed to a <code><a href="Protocols/BMViewWithViewModel.html">BMViewWithViewModel</a></code>.
These properties should help the view render itself to reflect proper states.</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">ProfileViewModel</span><span class="p">:</span> <span class="kt">BMViewModel</span> <span class="p">{</span>
  <span class="k">let</span> <span class="nv">name</span><span class="p">:</span> <span class="kt">String</span>
  <span class="k">let</span> <span class="nv">age</span><span class="p">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">27</span>
<span class="p">}</span>
</code></pre>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">BMViewModel</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/TheInkedEngineer/blob/master/BloodyMary/Core/BMViewModel.swift#L17">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:10BloodyMary027BMViewWithViewControllerAndE5ModelP"></a>
                    <a name="//apple_ref/swift/Protocol/BMViewWithViewControllerAndViewModel" class="dashAnchor"></a>
                    <a class="token" href="#/s:10BloodyMary027BMViewWithViewControllerAndE5ModelP">BMViewWithViewControllerAndViewModel</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>A <code>BMViewWithViewControllerAndViewModel</code> is a <code><a href="Protocols/BMViewWithViewModel.html">BMViewWithViewModel</a></code> view managed by a <code>UIViewController</code>.
This <q>managing</q> automatically calls the <code>configure</code>, <code>style</code> and <code>layout</code> phases.
In addition, the controller set the <code>viewModel</code> of the view, therefore invoking the update at least once before the view is actually displayed.
This view is extended with helpers allowing to access the UINavigationBar, UINavigationItem, UIViewController from the view when present.</p>

                        <a href="Protocols/BMViewWithViewControllerAndViewModel.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">BMViewWithViewControllerAndViewModel</span> <span class="p">:</span> <span class="kt"><a href="Protocols/BMViewWithViewModel.html">BMViewWithViewModel</a></span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/TheInkedEngineer/blob/master/BloodyMary/Core/BMViewWithViewControllerAndViewModel.swift#L15-L18">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:10BloodyMary19BMViewWithViewModelP"></a>
                    <a name="//apple_ref/swift/Protocol/BMViewWithViewModel" class="dashAnchor"></a>
                    <a class="token" href="#/s:10BloodyMary19BMViewWithViewModelP">BMViewWithViewModel</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>A BMViewWithViewModel takes the BMView and UIView a step further by introducing a view model.
The view model is an object containing a set of properties reflecting the state of the view.
A view model makes it easier to mock a view by passing the state from the outside and therefore test it in any desired state.</p>
<h2 id='example' class='heading'>Example</h2>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">ProfileViewModel</span><span class="p">:</span> <span class="kt">BMViewModel</span> <span class="p">{</span>
  <span class="k">let</span> <span class="nv">name</span><span class="p">:</span> <span class="kt">String</span>
  <span class="k">let</span> <span class="nv">age</span><span class="p">:</span> <span class="kt">Int</span>

  <span class="k">var</span> <span class="nv">isAdult</span><span class="p">:</span> <span class="kt">Bool</span> <span class="p">{</span>
    <span class="n">age</span> <span class="o">&gt;</span> <span class="mi">18</span>
  <span class="p">}</span>

  <span class="k">var</span> <span class="nv">badgeColor</span><span class="p">:</span> <span class="kt">UIColor</span> <span class="p">{</span>
    <span class="n">isAdult</span> <span class="p">?</span> <span class="o">.</span><span class="nv">green</span> <span class="p">:</span> <span class="o">.</span><span class="n">red</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">ProfileView</span><span class="p">:</span> <span class="kt">BMViewWithViewModel</span> <span class="p">{</span>
  <span class="k">let</span> <span class="nv">badge</span> <span class="o">=</span> <span class="kt">UIView</span><span class="p">()</span>
  <span class="k">let</span> <span class="nv">nameLabel</span> <span class="o">=</span> <span class="kt">UILabel</span><span class="p">()</span>

  <span class="kd">func</span> <span class="nf">configure</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">self</span><span class="o">.</span><span class="nf">addSubview</span><span class="p">(</span><span class="k">self</span><span class="o">.</span><span class="n">badge</span><span class="p">)</span>
    <span class="k">self</span><span class="o">.</span><span class="nf">addSubview</span><span class="p">(</span><span class="k">self</span><span class="o">.</span><span class="n">nameLabel</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="kd">func</span> <span class="nf">style</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// style the elements</span>
  <span class="p">}</span>

  <span class="kd">func</span> <span class="nf">update</span><span class="p">(</span><span class="nv">oldViewModel</span><span class="p">:</span> <span class="kt">ProfileViewModel</span><span class="p">?)</span> <span class="p">{</span>
    <span class="k">self</span><span class="o">.</span><span class="n">badge</span><span class="o">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">viewModel</span><span class="p">?</span><span class="o">.</span><span class="n">badgeColor</span>
    <span class="k">self</span><span class="o">.</span><span class="n">nameLabel</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">viewModel</span><span class="p">?</span><span class="o">.</span><span class="n">name</span>
  <span class="p">}</span>

  <span class="kd">func</span> <span class="nf">layout</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// layout the subviews</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>By conformimng to <code>BMViewWithViewModel</code> in this previous example, we notice we do not explicetely need to specify the viewModel
since it is infered by swift through the <code>update(oldViewModel: VM?)</code> method.</p>

<p>By altering the view model, different states of the view can be tested in a fast efficient way.</p>

                        <a href="Protocols/BMViewWithViewModel.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">BMViewWithViewModel</span> <span class="p">:</span> <span class="kt"><a href="Protocols/BMView.html">BMView</a></span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/TheInkedEngineer/blob/master/BloodyMary/Core/BMViewWithViewModel.swift#L60-L74">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </section>
        </section>
        <section id="footer">
          <p>TheInkedEngineer</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.11.2</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
